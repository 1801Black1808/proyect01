<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Carta Troll con Stitch</title>
<style>
  :root{
    --bg:#d9f4ff;             /* celeste suave */
    --card:#ffffff;
    --accent:#4dabf7;         /* azul claro */
    --accent-dark:#339af0;    /* azul mÃ¡s oscuro */
    --shadow:#74c0fc;         /* sombra azul clara */
    --btn:#3bc9db;            /* turquesa */
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:var(--bg);
    font-family:Arial,Helvetica,sans-serif;
    position:relative;
  }
  .card{
    width:95%;
    max-width:480px;
    background:var(--card);
    border-radius:15px;
    box-shadow:0 0 15px var(--shadow);
    padding:22px 28px;
    text-align:center;
    position:relative;
    overflow: visible;
  }
  h2{margin-top:0}
  .opt{
    background:var(--accent);
    color:#fff;
    padding:12px;
    margin:10px 0;
    border-radius:8px;
    cursor:pointer;
    user-select:none;
    transition:.4s;
    position:relative;
  }
  .opt:hover{background:var(--accent-dark)}
  .explode {
    animation: explodeAnim 0.7s forwards;
  }
  .shatter {
    animation: shatterAnim 0.7s forwards;
  }
  @keyframes explodeAnim{
    0%{transform:scale(1) rotate(0deg);opacity:1}
    50%{transform:scale(1.4) rotate(15deg);opacity:.7}
    100%{transform:scale(0) rotate(720deg);opacity:0}
  }
  @keyframes shatterAnim{
    0%{transform:translate(0,0) rotate(0deg);opacity:1;}
    25%{transform:translate(-10px,-10px) rotate(-10deg);opacity:0.8;}
    50%{transform:translate(15px,15px) rotate(15deg);opacity:0.5;}
    75%{transform:translate(-20px,20px) rotate(-25deg);opacity:0.3;}
    100%{transform:translate(30px,-30px) rotate(45deg);opacity:0;}
  }
  button{
    margin-top:22px;
    padding:10px 24px;
    background:var(--btn);
    border:none;
    color:#fff;
    border-radius:10px;
    cursor:pointer;
    font-size:1rem;
  }

  /* Stitch asomado - ahora a la izquierda */
  #stitch-asomado {
    position: fixed;
    top: 10px;
    left: 10px; /* antes estaba right:10px */
    width: 80px;
    z-index: 1000;
    pointer-events: none;
    opacity: 0;
    animation: appearDisappear 2s ease forwards;
  }

  @keyframes appearDisappear {
    0% {opacity: 0;}
    20% {opacity: 1;}
    80% {opacity: 1;}
    100% {opacity: 0;}
  }

  /* Stitch corriendo - ahora a la derecha */
  #stitch-corriendo {
    position: fixed;
    bottom: 10px;
    right: 10px; /* antes estaba left:10px */
    width: 120px;
    z-index: 1001;
    pointer-events: none;
    display: none;
  }
</style>
</head>
<body>

<div class="card" id="contenedor"></div>

<!-- Stitch asomado -->
<img id="stitch-asomado" src="https://i.pinimg.com/originals/bb/5a/6d/bb5a6dd6654076760da9e8af1da4f380.gif" alt="Stitch asomado">

<!-- Stitch corriendo -->
<img id="stitch-corriendo" src="https://www.icegif.com/wp-content/uploads/2023/08/icegif-588.gif" alt="Stitch corriendo y estrellÃ¡ndose">

<script>
const preguntas = [
  {
    texto:"Esta es una pregunta obligatoria (solo hay una opciÃ³n)",
    opciones:[
      {txt:"Ok, acepto", resp:"Bien. No habÃ­a opciÃ³n, de todos modos ğŸ˜Œ"}
    ]
  },
  {
    texto:"Â¿Me extraÃ±ate?",
    opciones:[
      {txt:"SÃ­",               efecto:"explode"},
      {txt:"Sin duda, esperaba a que me respondieras",resp:"Es que estuve ocupado"},
      {txt:"Te extraÃ±Ã© todo este tiempo",              resp:"Â¡Ooo no sabÃ­a que me querÃ­as tanto! jajaja"},
      {txt:"No",               efecto:"shatter"},
      {txt:"Esperaba que te murieras",                 efecto:"explode"}
    ]
  },
  {
    texto:"Â¿Y ya tienes novio?",
    opciones:[
      {txt:"SÃ­",  resp:"Ooooo"},
      {txt:"No",  resp:"Ya veremos eso por te vas a quedar sola con la almohada ğŸ˜"},
      {txt:"Â¿QuÃ© te importa?", resp:"Yo no mÃ¡s decÃ­a ğŸ˜…"},
      {txt:"Â¿Por quÃ© tengo que contarte mi vida?", resp:"No te enojes, solo pregunto ğŸ¤­"}
    ]
  },
  {
    texto:"Â¿Te gusta la carta?",
    opciones:[
      {txt:"SÃ­, estÃ¡ bonita",        resp:"Aww, ya vale, me derretÃ­ ğŸ« "},
      {txt:"MÃ¡s o menos",            resp:"Mejor que nada, Â¿no? ğŸ˜…"},
      {txt:"Es rara como tÃº",        resp:"Oye, rara pero con estilo ğŸ˜"},
      {txt:"Â¿Esto es una broma?",    resp:"Todo en esta vida es una broma, respÃ³ndeme bien ğŸ¤¨"}
    ]
  },
  {
    texto:"Â¿CuÃ¡l fue tu primera impresiÃ³n de mÃ­?",
    opciones:[
      {txt:"QuÃ© molestoso",          resp:"Â¡Lo sabÃ­a! Tengo talento para eso ğŸ˜"},
      {txt:"QuÃ© simpÃ¡tico",          resp:"Uy, quÃ© halago inesperado ğŸ¥¹"},
      {txt:"Otro mÃ¡s del montÃ³n",    resp:"Buenoâ€¦ al menos no era menos del montÃ³n"},
      {txt:"Mejor ni digo",          resp:"Ahora sÃ­ me dejaste en suspenso"}
    ]
  },
  {
    texto:"Si te regalo algo, Â¿quÃ© esperas?",
    opciones:[
      {txt:"Algo hecho a mano",      resp:"Te harÃ© una cosa tan rara que pensarÃ¡s que fue arte moderno"},
      {txt:"Algo carÃ­simo",          resp:"Ah, con razÃ³n nunca quedo bien ğŸ˜‚"},
      {txt:"Una carta que me saque una sonrisa", resp:"Oye... eso justo estoy intentando"},
      {txt:"Solo que no lo olvides", resp:"Â¿CÃ³mo olvidarte si ni en paz mental estÃ¡s?"}
    ]
  },
  {
    texto:"Â¿CÃ³mo te sientes hoy (de verdad)?",
    opciones:[
      {txt:"Feliz",           resp:"Â¡Eso querÃ­a saber! ğŸ˜„"},
      {txt:"Cansada pero bien",resp:"Ya, te toca un abrazo mental ğŸ§¸"},
      {txt:"Pensativa",       resp:"A veces pensar mucho es bueno (y otras... no tanto)"},
      {txt:"Ni idea, floto",  resp:"Flotar estÃ¡ bien, mientras no te vayas del planeta ğŸŒ"}
    ]
  },
  {
    texto:"Si pudieras desaparecer un rato, Â¿quÃ© harÃ­as?",
    opciones:[
      {txt:"Dormir sin que nadie me moleste", resp:"Suena como un plan perfecto ğŸ˜´"},
      {txt:"Comer todo lo que quiera sin culpa",resp:"Con razÃ³n me quieres golpear ğŸ˜…"},
      {txt:"Ser invisible y hacer travesuras",  resp:"Â¡Uy, ya quiero ver esas travesuras! ğŸ˜ˆ"},
      {txt:"Nada, mejor quedarme aquÃ­",         resp:"QuÃ© valiente, te admiro"}
    ]
  },
  {
    texto:"Â¿QuÃ© te hace feliz Ãºltimamente?",
    opciones:[
      {txt:"La mÃºsica",          resp:"Apuesto a que tienes buen gusto"},
      {txt:"Mis amigos",         resp:"Con razÃ³n me quieres golpear"},
      {txt:"Dormir",             resp:"Dormir es la mejor terapia no pagada"},
      {txt:"Recordar buenos momentos", resp:"Esa respuesta vale mil"}
    ]
  },
  {
    texto:"Â¿QuÃ© te gustarÃ­a que pasara este aÃ±o?",
    opciones:[
      {txt:"Algo inesperado", resp:"Como esta carta, Â¿no?"},
      {txt:"Encontrar paz",   resp:"Lo mereces mÃ¡s de lo que crees"},
      {txt:"ReÃ­r mÃ¡s",        resp:"Prometo seguir intentando eso"},
      {txt:"Sentirme libre",  resp:"Entonces que vuele tu alma un rato, pero sin drama"}
    ]
  },
  {
    texto:"Â¿Me aguantas porqueâ€¦?",
    opciones:[
      {txt:"Eres buena persona",  resp:"Ahora sÃ­ me puse suaveâ€¦ gracias"},
      {txt:"Me haces reÃ­r",       resp:"Â¡Entonces sigo molestando!"},
      {txt:"Ya no hay marcha atrÃ¡s", resp:"Ah, viste, atrapada quedaste"},
      {txt:"Porque sÃ­ y ya",      resp:"Ese â€˜porque sÃ­â€™ tiene peso emocional ğŸ˜Œ"}
    ]
  }
];

let indice = 0;
const cont = document.getElementById("contenedor");
const stitchAsomado = document.getElementById("stitch-asomado");
const stitchCorriendo = document.getElementById("stitch-corriendo");

let asomadoCount = 0;
const maxAsomado = 4;

function renderPregunta() {
  const q = preguntas[indice];
  let html = `<h2>${q.texto}</h2>`;
  q.opciones.forEach((op,i)=>{
    html += `<div class="opt" data-i="${i}">${op.txt}</div>`;
  });
  cont.innerHTML = html;
  document.querySelectorAll(".opt").forEach(el=>{
    el.onclick = ()=>handleOption(el);
  });
}

function handleOption(el){
  const idxOp = +el.dataset.i;
  const obj = preguntas[indice].opciones[idxOp];

  if(!obj.resp){
    const efecto = obj.efecto || (Math.random() > 0.5 ? "explode" : "shatter");
    el.classList.add(efecto);
    el.style.pointerEvents="none";
    showStitchCorriendo();
    setTimeout(()=>{ el.remove(); },700);
    return;
  }

  cont.innerHTML = `<h2 style="min-height:40px;">${obj.resp}</h2><button onclick="siguiente()">Siguiente</button>`;
}

function siguiente(){
  indice++;
  if(indice < preguntas.length){
    renderPregunta();
  } else {
    cont.innerHTML = `<h2>Fin de la carta. Â¡Gracias por jugar! ğŸ¥³</h2><button onclick="reiniciar()">Volver a empezar</button>`;
  }
}

function reiniciar(){
  indice=0;
  asomadoCount=0;
  renderPregunta();
  startStitchAsomadoInterval();
}

function showStitchAsomado(){
  stitchAsomado.style.animation = "none";
  void stitchAsomado.offsetWidth;
  stitchAsomado.style.animation = "appearDisappear 2s ease forwards";
}

function showStitchCorriendo(){
  stitchCorriendo.style.display = "block";
  setTimeout(()=>{ stitchCorriendo.style.display = "none"; }, 2200);
}

function startStitchAsomadoInterval(){
  showStitchAsomado();
  asomadoCount++;
  const intervalId = setInterval(()=>{
    if(asomadoCount >= maxAsomado){
      clearInterval(intervalId);
      stitchAsomado.style.opacity = 0;
      return;
    }
    showStitchAsomado();
    asomadoCount++;
  }, 20000);
}

/* ---------- Inicio ---------- */
renderPregunta();
startStitchAsomadoInterval();
</script>
</body>
</html>
